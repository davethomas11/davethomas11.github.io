"use strict";var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},game_object_1=require("../../engine/models/game-object"),velocity_module_1=require("../../engine/modules/velocity-module"),rect_1=require("../../engine/geometry/rect"),point_1=require("../../engine/geometry/point"),number_tools_1=require("../../engine/util/number-tools"),physics_module_1=require("../../engine/modules/physics-module"),hitpoint_module_1=require("../modules/hitpoint-module"),Laser=function(e){function t(t,i,o,s,n){e.call(this),this.LASER_LENGTH=120,this.AMPLITUDE_OF_SINE=17,this.FREQUENCY_AMT=.5*Math.PI/5,this.LASER_DMG=5,this.rect=new rect_1.default(0,0,0,0),this.point=new point_1.default(0,0),this.x=s,this.y=n,this.velocityModule=new velocity_module_1.default,this.velocityModule.constantAccelerateAtAngleXY(t,i,o),this.addModule(this.velocityModule),this.addModule(new physics_module_1.PhysicsModule(this))}return __extends(t,e),t.prototype.render=function(e){e.save(),this.sineWave(e),e.stroke(),e.restore()},t.prototype.sineWave=function(e){e.translate(this.x,this.y),e.rotate(this.velocityModule.angle),e.beginPath(),e.moveTo(0,0),e.lineTo(this.LASER_LENGTH,0),e.strokeStyle="#f442a4",e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle="#F00";for(var t=0,i=0;i<this.LASER_LENGTH;i++){var o=Math.sin(t)*this.AMPLITUDE_OF_SINE;e.lineTo(i,o),t+=this.FREQUENCY_AMT}},t.prototype.update=function(t){e.prototype.update.call(this,t),this.point.x=this.x,this.point.y=this.y,this.rect.width=this.context.getViewPortWidth(),this.rect.height=this.context.getViewPortHeight(),this.alive=number_tools_1.default.rectContainsPoint(this.rect,this.point)},t.prototype.getBodyDefinition=function(){var e=new PhysicsType2d.Dynamics.BodyDefinition;e.type=PhysicsType2d.Dynamics.BodyType.DYNAMIC;var t=physics_module_1.PhysicsConversions.toMetres(this.x),i=physics_module_1.PhysicsConversions.toMetres(this.y);return e.position=new PhysicsType2d.Vector2(t,i),e.bullet=!0,e},t.prototype.getFixtures=function(){var e=new PhysicsType2d.Dynamics.FixtureDefinition,t=new PhysicsType2d.Collision.Shapes.EdgeShape,i=new PhysicsType2d.Vector2(0,0),o=physics_module_1.PhysicsConversions.toMetres(Math.cos(this.velocityModule.angle)*this.LASER_LENGTH),s=physics_module_1.PhysicsConversions.toMetres(Math.sin(this.velocityModule.angle)*this.LASER_LENGTH),n=new PhysicsType2d.Vector2(o,s);return t.Set(i,n),e.isSensor=!0,e.shape=t,e.density=.25,[e]},t.prototype.onContact=function(e){if(e!=this.spawner){this.alive=!1;var t=e.getModule(hitpoint_module_1.default);void 0!=t&&t.reduce(this.LASER_DMG)}},t}(game_object_1.default);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Laser;
//# sourceMappingURL=laser.js.map
