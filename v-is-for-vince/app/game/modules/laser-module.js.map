{"version":3,"sources":["game/modules/laser-module.ts"],"names":["module_1","require","velocity_module_1","keyboard_mapping_1","keyboard_input_1","game_1","laser_1","LaserGunModule","_super","fireKey","acceleration","speed","call","this","__extends","prototype","onAttach","parent","_this","laserMapping","default","registerOnDown","fireLaser","controller","getInputController","attachKeyboardMapping","gameObject","module","getModule","velocityModule","laser","angle","x","y","spawn","Object","defineProperty","exports","value"],"mappings":"sNAAAA,SAAAC,QAAmB,+BAEnBC,kBAAAD,QAA2B,wCAC3BE,mBAAAF,QAAgC,mDAChCG,iBAAAH,QAA+B,iDAC/BI,OAAAJ,QAAiB,qBACjBK,QAAAL,QAAkB,mBAElBM,eAAA,SAAAC,GAME,QAAAD,GAAYE,EAAiBC,EAAsBC,GACjDH,EAAAI,KAAAC,MAEAA,KAAKJ,QAAUA,EACfI,KAAKH,aAAeA,EACpBG,KAAKF,MAAQA,EA0BjB,MArC4CG,WAAAP,EAAAC,GAc1CD,EAAAQ,UAAAC,SAAA,SAASC,GAAT,GAAAC,GAAAL,KAEMM,EAAe,GAAIhB,oBAAAiB,OACvBD,GAAaE,eAAeR,KAAKJ,QAAS,WAAM,MAAAS,GAAKI,UAAUL,IAC/D,IAAIM,GAAalB,OAAAe,QAAKI,mBAAmBpB,iBAAAgB,QAEvB,OAAdG,GACDA,EAAkCE,sBAAsBN,IAI7DZ,EAAAQ,UAAAO,UAAA,SAAUI,GAER,GAAIC,GAASD,EAAWE,UAAU1B,kBAAAkB,QAClC,IAAc,MAAVO,EAAgB,CAElB,GAAIE,GAAiBF,EACjBG,EAAQ,GAAIxB,SAAAc,QAAMP,KAAKH,aAAcmB,EAAeE,MAAOlB,KAAKF,MACpEmB,GAAME,EAAIN,EAAWM,EACrBF,EAAMG,EAAIP,EAAWO,EACrBP,EAAWQ,MAAMJ,KAGvBvB,GArC4CP,SAAAoB,QAA5Ce,QAAAC,eAAAC,QAAA,cAAAC,OAAA","file":"laser-module.js","sourcesContent":["import Module from '../../engine/modules/module'\nimport GameObject from '../../engine/models/game-object'\nimport VelocityModule from '../../engine/modules/velocity-module'\nimport BaseKeyboardMapping from '../../engine/input-controllers/keyboard-mapping'\nimport KeyboardController from '../../engine/input-controllers/keyboard-input'\nimport Game from '../../engine/game'\nimport Laser from '../models/laser'\n\nexport default class LaserGunModule extends Module {\n\n  fireKey: string;\n  acceleration: number;\n  speed: number;\n\n  constructor(fireKey: string, acceleration: number, speed: number) {\n    super();\n\n    this.fireKey = fireKey;\n    this.acceleration = acceleration;\n    this.speed = speed;\n  }\n\n  onAttach(parent: GameObject): void {\n    \n    var laserMapping = new BaseKeyboardMapping();\n    laserMapping.registerOnDown(this.fireKey, () => this.fireLaser(parent));\n    var controller = Game.getInputController(KeyboardController)\n\n    if (controller != null) {\n      (controller as KeyboardController).attachKeyboardMapping(laserMapping);\n    }\n  }\n\n  fireLaser(gameObject: GameObject): void {\n\n    var module = gameObject.getModule(VelocityModule);\n    if (module != null) {\n\n      var velocityModule = module as VelocityModule;\n      var laser = new Laser(this.acceleration, velocityModule.angle, this.speed);\n      laser.x = gameObject.x;\n      laser.y = gameObject.y;\n      gameObject.spawn(laser);\n    }\n  }\n}\n"]}