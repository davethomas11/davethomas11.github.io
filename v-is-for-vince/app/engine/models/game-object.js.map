{"version":3,"sources":["engine/models/game-object.ts"],"names":["spawn_event_1","require","array_utils_1","event_system_1","GameObject","this","alive","x","y","modules","prototype","update","deltaMs","_this","forEach","module","addModule","parent","push","removeModule","undefined","default","remove","spawn","gameObject","context","spawner","post","getModule","type","getByType","detach","m","onDetach","attach","onAttach","onContact","other","Object","defineProperty","exports","value"],"mappings":"YAEA,IAAAA,eAAAC,QAAuB,yBACvBC,cAAAD,QAAuB,uBAEvBE,eAAAF,QAAqB,4BAErBG,WAAA,WAUE,QAAAA,KATAC,KAAAC,OAAiB,EACjBD,KAAAE,EAAY,EACZF,KAAAG,EAAY,EAIJH,KAAAI,WA+CV,MAxCEL,GAAAM,UAAAC,OAAA,SAAOC,GAAP,GAAAC,GAAAR,IACEA,MAAKI,QAAQK,QAAQ,SAACC,GACpBA,EAAOJ,OAAOE,EAAMD,MAIxBR,EAAAM,UAAAM,UAAA,SAAUD,GACRA,EAAOE,OAASZ,KAChBA,KAAKI,QAAQS,KAAKH,IAGpBX,EAAAM,UAAAS,aAAA,SAAaJ,GACXA,EAAOE,OAASG,OAChBlB,cAAAmB,QAAWC,OAAOP,EAAQV,KAAKI,UAGjCL,EAAAM,UAAAa,MAAA,SAAMC,GACAnB,KAAKoB,UACPD,EAAWE,QAAUrB,KACrBF,eAAAkB,QAASM,KAAKtB,KAAKoB,QAAS,GAAIzB,eAAAqB,QAAWG,MAI/CpB,EAAAM,UAAAkB,UAAA,SAAWC,GACT,MAAO3B,eAAAmB,QAAWS,UAAUD,EAAMxB,KAAKI,UAGzCL,EAAAM,UAAAqB,OAAA,SAAON,GAAP,GAAAZ,GAAAR,IACEA,MAAKoB,QAAUL,OACff,KAAKqB,QAAUN,OACff,KAAKI,QAAQK,QAAQ,SAAAkB,GAAK,MAAAA,GAAEC,SAASpB,EAAMY,MAG7CrB,EAAAM,UAAAwB,OAAA,SAAOT,GAAP,GAAAZ,GAAAR,IACEA,MAAKoB,QAAUA,EACfpB,KAAKI,QAAQK,QAAQ,SAAAkB,GAAK,MAAAA,GAAEG,SAAStB,EAAMY,MAG7CrB,EAAAM,UAAA0B,UAAA,SAAUC,KAEZjC,IAEAkC,QAAAC,eAAAC,QAAA,cAAAC,OAAA,oBAAerC","file":"game-object.js","sourcesContent":["import Module from '../modules/module';\nimport Game from '../game';\nimport SpawnEvent from '../events/spawn-event';\nimport ArrayUtils from '../util/array-utils';\nimport GameContext from './game-context';\nimport EventBus from '../services/event-system'\n\nabstract class GameObject {\n  alive: boolean = true;\n  x: number = 0;\n  y: number = 0;\n  context: GameContext | undefined;\n  spawner: GameObject | undefined;\n\n  private modules: Array<Module> = [];\n\n  //TODO: placeholder for base GameObject\n  constructor() {}\n\n  abstract render(ctx: CanvasRenderingContext2D): void;\n\n  update(deltaMs: number): void {\n    this.modules.forEach((module) => {\n      module.update(this, deltaMs);\n    });\n  }\n\n  addModule(module: Module): void {\n    module.parent = this;\n    this.modules.push(module);\n  }\n\n  removeModule(module: Module): void {\n    module.parent = undefined;\n    ArrayUtils.remove(module, this.modules);\n  }\n\n  spawn(gameObject: GameObject): void {\n    if (this.context) {\n      gameObject.spawner = this;\n      EventBus.post(this.context, new SpawnEvent(gameObject));\n    }\n  }\n\n  getModule (type: any): Module | undefined {\n    return ArrayUtils.getByType(type, this.modules);\n  }\n\n  detach(context: GameContext): void {\n    this.context = undefined;\n    this.spawner = undefined;\n    this.modules.forEach(m => m.onDetach(this, context));\n  }\n\n  attach(context: GameContext): void {\n    this.context = context;\n    this.modules.forEach(m => m.onAttach(this, context));\n  }\n  \n  onContact(other: GameObject): void {\n  }\n}\n\nexport default GameObject;"]}