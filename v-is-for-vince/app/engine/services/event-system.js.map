{"version":3,"sources":["engine/services/event-system.ts"],"names":["spawn_event_1","require","EventBus","post","context","event","events","eventPool","getUniqueGameName","push","handleEvents","game","length","handleEvent","shift","is","default","add","gameObject","Object","defineProperty","exports","value"],"mappings":"YAEA,IAAAA,eAAAC,QAAuB,yBAGvBC,SAAA,WAAA,QAAAA,MAwBA,MApBSA,GAAAC,KAAP,SAAYC,EAAsBC,GAChC,GAAIC,GAASJ,EAASK,UAAUH,EAAQI,oBAC1B,OAAVF,IACFJ,EAASK,UAAUH,EAAQI,qBAAuBF,MAEpDA,EAAOG,KAAKJ,IAGPH,EAAAQ,aAAP,SAAoBC,GAElB,IADA,GAAIL,GAASJ,EAASK,UAAUI,EAAKH,qBAC9BF,GAAUA,EAAOM,OAAS,GAC/BV,EAASW,YAAYF,EAAML,EAAOQ,UAIvBZ,EAAAW,YAAf,SAA2BF,EAAYN,GACjCA,EAAOU,GAAGf,cAAAgB,UACZL,EAAKM,IAAKZ,EAAqBa,aAnBpBhB,EAAAK,aAsBjBL,IAxBAiB,QAAAC,eAAAC,QAAA,cAAAC,OAAA","file":"event-system.js","sourcesContent":["import GameEvent from '../events/event'\nimport GameContext from '../models/game-context'\nimport SpawnEvent from '../events/spawn-event'\nimport Game from '../game'\n\nexport default class EventBus {\n\n  private static eventPool: { [gameName: string]: Array<GameEvent> } = {};\n\n  static post(context: GameContext, event: GameEvent): void {\n    let events = EventBus.eventPool[context.getUniqueGameName()];\n    if (events == null) {\n      EventBus.eventPool[context.getUniqueGameName()] = events = [];\n    }\n    events.push(event);\n  }\n\n  static handleEvents(game: Game): void {\n    let events = EventBus.eventPool[game.getUniqueGameName()];\n    while (events && events.length > 0) {\n      EventBus.handleEvent(game, events.shift());\n    }\n  }\n\n  private static handleEvent(game: Game, event: GameEvent | undefined): void {\n    if (event!.is(SpawnEvent)) {\n      game.add((event as SpawnEvent).gameObject);\n    }\n  }\n}"]}