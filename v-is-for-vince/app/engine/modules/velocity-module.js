"use strict";var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},module_1=require("./module"),number_tools_1=require("../util/number-tools"),VelocityModule=function(e){function t(t,i,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),e.call(this),this.ANGLE_OFFSET=-1.5708,this.velocityX=new VelocityDimension,this.velocityY=new VelocityDimension,this._angle=0,this.maxVelocityX=t,this.maxVelocityY=t,this.acceleration=i,this.deceleration=o}return __extends(t,e),t.prototype.update=function(e,t){var i=t/1e3;this.velocityX.update(i,this.maxVelocityX),this.velocityY.update(i,this.maxVelocityY),e.x+=i*this.velocityX.velocity,e.y+=i*this.velocityY.velocity},Object.defineProperty(t.prototype,"velX",{get:function(){return this.velocityX.velocity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"velY",{get:function(){return this.velocityY.velocity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),t.prototype.accelerateRight=function(){this.accelerationX=this.acceleration},t.prototype.accelerateLeft=function(){this.accelerationX=-this.acceleration},t.prototype.accelerateUp=function(){this.accelerationY=-this.acceleration},t.prototype.accelerateDown=function(){this.accelerationY=this.acceleration},t.prototype.decelerateRight=function(){this.decelerationX=-this.deceleration},t.prototype.decelerateLeft=function(){this.decelerationX=this.deceleration},t.prototype.decelerateUp=function(){this.decelerationY=this.deceleration},t.prototype.decelerateDown=function(){this.decelerationY=-this.deceleration},Object.defineProperty(t.prototype,"accelerationX",{set:function(e){this.velocityX.acceleration=e,this.calculateAngle()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accelerationY",{set:function(e){this.velocityY.acceleration=e,this.calculateAngle()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decelerationX",{set:function(e){this.velocityX.deceleration=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decelerationY",{set:function(e){this.velocityY.deceleration=e},enumerable:!0,configurable:!0}),t.prototype.constantAccelerateAtAngleXY=function(e,t,i){this.maxVelocityX=i*Math.cos(t),this.maxVelocityY=i*Math.sin(t),this.accelerationX=Math.abs(e)*Math.cos(t),this.accelerationY=Math.abs(e)*Math.sin(t),this._angle=t},t.prototype.calculateAngle=function(){var e=0,t=0;this.velocityX.accelerating&&this.velocityY.accelerating?(e=this.velocityX.velocity,t=this.velocityY.velocity):this.velocityX.accelerating?(e=this.velocityX.acceleration,t=this.velocityY.velocity):this.velocityY.accelerating&&(e=this.velocityX.velocity,t=this.velocityY.acceleration),this._angle=Math.atan2(e,-t)+this.ANGLE_OFFSET},t}(module_1.default);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=VelocityModule;var VelocityDimension=function(){function e(){this._velocity=0,this._acceleration=0,this._accelerating=!1}return Object.defineProperty(e.prototype,"acceleration",{get:function(){return this._acceleration},set:function(e){this._accelerating=0!==e,this._acceleration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accelerating",{get:function(){return this._accelerating},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deceleration",{set:function(e){(this._acceleration>0&&e<0||this._acceleration<0&&e>0)&&(this._accelerating=!1,this._acceleration=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"velocity",{get:function(){return this._velocity},enumerable:!0,configurable:!0}),e.prototype.update=function(e,t){if(0==this._acceleration)return void(this._velocity=0);var i=e*this._acceleration,o=t,c=-t;this._accelerating||(this._velocity>0?c=0:this._velocity<0&&(o=0)),this._velocity+=i,this._velocity=number_tools_1.default.clamp(this._velocity,c,o),0==this._velocity&&(this._acceleration=0,this._accelerating=!1)},e}();
//# sourceMappingURL=velocity-module.js.map
