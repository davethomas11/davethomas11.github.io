"use strict";var frame_rate_1=require("./models/frame-rate"),render_engine_1=require("./services/render-engine"),event_system_1=require("./services/event-system"),array_utils_1=require("./util/array-utils"),Game=function(){function t(e){this.canvas=e;var r=e.getContext("2d");if(null==r)throw new Error("Could not get the context from the canvas");this.context=r,this.gameObjects=[],t.inputControllers=[],this.running=!1}return t.prototype.start=function(){this.running=!0,this.update(),t.inputControllers.forEach(function(t){return t.bind()})},t.prototype.showFrameRate=function(t){t?(this.frameRateOverlay=new frame_rate_1.default,this.add(this.frameRateOverlay)):this.frameRateOverlay.alive=!1},t.prototype.setBounds=function(e,r){t._viewPortWidth=e,t._viewPortHeight=r,this.canvas.width=e,this.canvas.height=r,this.redraw()},t.prototype.stop=function(){this.running=!1,this.currentFrame=0,t.inputControllers.forEach(function(t){return t.unbind()})},t.prototype.add=function(t){this.gameObjects.push(t)},t.prototype.addInput=function(e){t.inputControllers.push(e),this.running&&e.bind()},t.prototype.removeAllGameObjects=function(){this.gameObjects=[]},t.prototype.redraw=function(){render_engine_1.default.render(this.context,this.gameObjects)},t.prototype.update=function(e){var r=this;void 0===e&&(e=0);var n=0;e>0&&this.currentFrame>0&&(n=e-this.currentFrame),this.currentFrame=e;for(var i=this.gameObjects.length-1;i>=0;i--)this.gameObjects[i].alive||this.gameObjects.splice(i,1);for(;t.events.length>0;)event_system_1.default.handleEvent(this,t.events.shift());this.gameObjects.forEach(function(t){return t.update(n)}),this.redraw(),this.running&&window.requestAnimationFrame(function(t){return r.update(t)})},t.getInputController=function(e){return array_utils_1.default.getByType(e,t.inputControllers)},t._viewPortWidth=0,t._viewPortHeight=0,t.Info=function(){function e(){}return Object.defineProperty(e,"viewPortHeight",{get:function(){return t._viewPortHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e,"viewPortWidth",{get:function(){return t._viewPortWidth},enumerable:!0,configurable:!0}),e}(),t.events=[],t.EventBus=function(){function e(){}return e.post=function(e){t.events.push(e)},e}(),t}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Game;
//# sourceMappingURL=game.js.map
